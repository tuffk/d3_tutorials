<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>tutorial 1</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <style media="screen">

    #map {
      display: block;
      text-indent: -9999px;
      width: 1024px;
      height: 1024px;
      background: url(il.svg);
      background-size: 1024px 1024px;
    }

    </style>

  </head>
  <body>

    <div id="test1"></div>

    <svg  xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">

      <defs>
        <pattern id="il" height="100%" width="100%"
        patternContentUnits="objectBoundingBox">

        <image height="1" width="1" preserveAspectRatio="none"
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="il.svg"
        ></image>

        </pattern>

        <pattern id="mx" height="100%" width="100%"
        patternContentUnits="objectBoundingBox">

        <image height="1" width="1" preserveAspectRatio="none"
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="mx.svg"
        ></image>

        </pattern>

        <pattern id="us" height="100%" width="100%"
        patternContentUnits="objectBoundingBox">

        <image height="1" width="1" preserveAspectRatio="none"
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="us.svg"
        ></image>

        </pattern>

        <pattern id="cn" height="100%" width="100%"
        patternContentUnits="objectBoundingBox">

        <image height="1" width="1" preserveAspectRatio="none"
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="cn.svg"
        ></image>

        </pattern>

      </defs>

    </svg>

    <script type="text/javascript">

      var width = 500,
          height = 500;

      d3.json("country.json", function (data) {

        var leGraf = d3.select('#test1')
                        .append('svg')
                        .attr('height',height)
                        .attr('width',width)
                        ;

        leGraf.selectAll("rect")
              .data(data)
              .enter()
              .append("rect")
              .attr("width", function (d) { return d.value * 10; })
              .attr("height", 48)
              .attr("y", function(d, i) { return i * 50; })
              //.attr("fill", "blue")
              //.style("fill", "url(" + function(d) { return d.url; } + ")")
              //.attr("fill", "url(#israel)")
              //.attr("fill", function (d) { return d.id; } )
              .attr("fill", function (d) { return "url(#" + d.id + ")"; } )
              ;

        leGraf.selectAll("text")
              .data(data)
              .enter()
              .append("text")
              .attr("fill", "black")
              .attr("y", function(d, i) { return i * 50 + 25})
              .text(function (d, i) { return d.name });

      });

    </script>
  </body>
</html>
